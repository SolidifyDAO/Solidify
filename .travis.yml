language: node_js
osx_image: xcode9.1

cache:
  directories:
    - node_modules

before_install:
  # install node (npm), truffle, testrpc
  - rm -rf ~/.nvm
  - git clone https://github.com/creationix/nvm.git ~/.nvm
  - source ~/.nvm/nvm.sh
  - nvm install 8.9.1
  - node --version
  - cd .logs
  - npm install
  - cd ../
  - ganache-cli > .logs/ganache.log 2>.logs/ganache.err &

script:
  - make test

after_script:
  # print truffle and testrpc logs
  - cat .logs/truffle.log
  - cat .logs/ganache.log
